<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic:wght@400..700&display=swap" rel="stylesheet">
    <title>KAJIAN</title>
    <style>
body, html {
  height: 100%;
}
body {
  font-family: Arial, sans-serif;
}
.menu {
  position: fixed;
  top: 7px;
  right: 10px;
  z-index: 1000;
}
.hamburger {
  display: inline-block;
  cursor: pointer;
}
.hamburger div {
  width: 35px;
  height: 5px;
  background-color: #333;
  margin: 6px 0;
  transition: 0.4s;
}
.page {
  display: none;
  padding: 10px;
  margin-top: 20px;
}
.active {
  display: block;
}
.menu-items {
  visibility: hidden;
  opacity: 0;
  position: fixed;
  top: 50px;
  right: 10px;
  background-color: #fff;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  border-radius: 5px;
  width: 150px;
  transition: visibility 0s, opacity 0.5s ease;
  
}
.menu-items.show {
  visibility: visible;
  opacity: 1;
}
.menu-items button {
  display: block;
  width: 100%;
  padding: 10px 20px;
  background: none;
  border: none;
  text-align: left;
  cursor: pointer;
  color: #333;
  border-bottom: 1px solid #ddd;
}
.menu-items button:hover {
  background-color: #f0f0f0;
}

.container {
    display: block;
    cursor: pointer;
    float: right;
}
.bar1, .bar2, .bar3 {
    width: 35px;
    height: 5px;
    background: linear-gradient(135deg, rgb(43, 113, 197), rgb(26, 81, 148));
    margin: 6px 0;
    transition: 0.4s;
}
.change .bar1 {
  transform: translate(0, 11px) rotate(-45deg);
}
.change .bar2 {
  opacity: 0;
}
.change .bar3 {
    transform: translate(0, -11px) rotate(45deg);
}
body {
    font-family: "Lato", sans-serif;
}
.openbtn:hover {
    background-color:#444;
}
.search-box {
    width: 300px;
    display: flex;
    margin: 0 auto;
    position: fixed;
    margin-top:-22px;
}
input[type="text"] {
    width: 80%;
    padding: 10px;
    box-sizing: border-box;
    border: 1px solid #ccc;
    border-radius: 4px 0 0 4px;
}
.search-button {
    width: 20%;
    padding: 10px;
    background: linear-gradient(135deg, rgb(43, 113, 197), rgb(26, 81, 148));
    color: #fff;
    border: NONE;
    border-radius: 0 4px 4px 0;
    cursor: pointer;
}
button:hover {
    background-color: #000000;
}
@media screen and (max-width: 600px) {
    .search-box {
        width: 80%;
    }
}
@font-face {
  font-family: 'CustomArabicFont';
  src: url('arabic-font.ttf') format('truetype');
  font-weight: normal;
  font-style: normal; 
}
td button{
    width: 100%;
    padding: 8px 12px;
    margin: -5px; 
background: linear-gradient(135deg, rgb(43, 113, 197), rgb(26, 81, 148));
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    text-decoration: none;
    display: block;
    transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
    text-align: left;
}
  
td button:hover {
    background-color: #000000; 
    transform: translateY(-2px);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2), 0 3px 6px rgba(0, 0, 0, 0.1);
}
td button:active {
    background-color: #164c9c; 
    transform: translateY(1px);
    box-shadow: 0 3px 4px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.08);
}
.rtl, .indonesia {
  text-align: justify;
  font-size: 20px;
  font-family: 'Scheherazade New', 'CustomArabicFont', 'Traditional Arabic', Tahoma, serif;

}
.rtl {
  direction: rtl;
  font-family: 'CustomArabicFont', 'Traditional Arabic', Tahoma, sans-serif;
}
.TABEL {
  width: 100%;
  margin: 0px;
  overflow: hidden;
}
#dataTable1 tbody tr:first-child,
#dataTable2 tbody tr:first-child,
#dataTable3 tbody tr:first-child,
#dataTable4 tbody tr:first-child,
#dataTable5 tbody tr:first-child
 {
  display: none; 
}
#dataTable1,
#dataTable2,
#dataTable3,
#dataTable4,
#dataTable5
 {
  width: 100%;
  border-collapse: collapse;
  max-width: 100%;
  margin-top: 25px;
}
#dataTable1 tr:last-child td, 
#dataTable2 tr:last-child td, 
#dataTable3 tr:last-child td, 
#dataTable4 tr:last-child td, 
#dataTable5 tr:last-child td, 
#dataTable6 tr:last-child td
 {
  border-radius: 5px;
}
#dataTable1 tr:first-child td, 
#dataTable2 tr:first-child td, 
#dataTable3 tr:first-child td, 
#dataTable4 tr:first-child td, 
#dataTable5 tr:first-child td, 
#dataTable6 tr:first-child td
 {
  border-radius: 5px;
  background-color: black;
  color: #ffffff;
}
#dataTable1 th, #dataTable1 td, 
#dataTable2 th, #dataTable2 td, 
#dataTable3 th, #dataTable3 td, 
#dataTable4 th, #dataTable4 td, 
#dataTable5 th, #dataTable5 td, 
#dataTable6 th, #dataTable6 td, 
#dataTable7 th, #dataTable7 td
 {
  display: block;
  padding: 5px;
  font-size: 16px;
  border-radius: 5px;
  margin-top: -1px;
  margin-bottom: 5px;
  color: black;
}
#dataTable1 th:nth-child(1), #dataTable1 td:nth-child(1), 
#dataTable2 th:nth-child(1), #dataTable2 td:nth-child(1), 
#dataTable3 th:nth-child(1), #dataTable3 td:nth-child(1), 
#dataTable4 th:nth-child(1), #dataTable4 td:nth-child(1), 
#dataTable5 th:nth-child(1), #dataTable5 td:nth-child(1), 
#dataTable6 th:nth-child(1), #dataTable6 td:nth-child(1) {
  width: auto;
  float: center;
  background-color: #ecf8fb;
  color: #000b41;
}

#dataTable1 th:nth-child(2), #dataTable1 td:nth-child(2), 
#dataTable2 th:nth-child(2), #dataTable2 td:nth-child(2), 
#dataTable3 th:nth-child(2), #dataTable3 td:nth-child(2), 
#dataTable4 th:nth-child(2), #dataTable4 td:nth-child(2), 
#dataTable5 th:nth-child(2), #dataTable5 td:nth-child(2), 
#dataTable6 th:nth-child(2), #dataTable6 td:nth-child(2)
{
  width: auto;
  float: center;
  background-color: #ecf8fb;
  color: #000b41;
}
#dataTable1 th:nth-child(3), #dataTable1 td:nth-child(3), 
#dataTable2 th:nth-child(3), #dataTable2 td:nth-child(3), 
#dataTable3 th:nth-child(3), #dataTable3 td:nth-child(3), 
#dataTable4 th:nth-child(3), #dataTable4 td:nth-child(3), 
#dataTable5 th:nth-child(3), #dataTable5 td:nth-child(3), 
#dataTable6 th:nth-child(3), #dataTable6 td:nth-child(3)
 {
  width: auto;
  float: center;
  background-color: #fffff0;
  color: #000b41;
}
#dataTable1 td.rtl, 
#dataTable2 td.rtl, 
#dataTable3 td.rtl, 
#dataTable4 td.rtl, 
#dataTable5 td.rtl, 
#dataTable6 td.rtl
 {
  direction: rtl;
}
#dataTable1 td.indonesia, 
#dataTable2 td.indonesia, 
#dataTable3 td.indonesia, 
#dataTable4 td.indonesia, 
#dataTable5 td.indonesia, 
#dataTable6 td.indonesia
 {
  direction: ltr;
}
.underline-text {
color:#ff1a1a;
}
.center-text {
    display:block;
    margin-bottom: -20px;
    text-align: center;
}
.quote-text {
    display: block;
    text-align: left;
    margin-bottom: -20px;
    font-family: "Lato", sans-serif;
}
.bold {
  font-weight: bold;
}
#dataTable tbody tr:first-child {
  display: none;
}
.highlight {
  background-color: rgb(255, 0, 0);
}
.hidden-cell {
    display: none;
}
.transparent-bg {
    background-color: transparent;
}
.red-text {
  color: red;
}
#searchResult1,
#searchResult2,
#searchResult3,
#searchResult4,
#searchResult5,
#searchResult6 {
  display: none;
}
    </style>
</head>
<body>
 
  <div class="menu">
    <div class="container" onclick="toggleMenu(this)">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
    </div>
    <div class="menu-items" id="menuItems">
        <button class="nav-button" onclick="location.reload()">REFRES</button>
    </div>
</div>
<div id="halaman1" class="page active">
  <!-- Pencarian dan tabel kedua -->
<div class="search-container">
  <form action="#" method="GET" class="search-box" id="searchBox2">
    <input type="text" id="searchInput2" placeholder="" required>
    <button class="search-button" type="submit">Cari</button>
  </form>
</div>
<span id="searchResult2"></span>
             <!-- Tabel Kedua -->
  <div class="chat-body" id="chatBody2">
    <div class="TABEL">
      <table id="dataTable2">
        <tbody>
          <tr>
            <th></th>
            <th></th>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<div id="popupFormContainer1" class="chat-form-container" style="display:none;">

  <script>
    function isPureArabic(text) {
      const arabicRegex = /^[\u0600-\u06FF\s\p{P}0-9]+$/u;
      return arabicRegex.test(text.trim());
    }
  
    function containsArabic(text) {
      const arabicRegex = /[\u0600-\u06FF]/;
      return arabicRegex.test(text);
    }
  
    function processText(text) {
      let processedText = text.replace(/\*(.*?)\*/g, '<span class="underline-text">$1</span>');
      processedText = processedText.replace(/\^(.*?)\^/g, '<span class="quote-text">$1</span>');
      processedText = processedText.replace(/\$(.*?)\$/g, '<span class="bold">$1</span>');
      return processedText;
    }
  
    function toggleRowVisibility(event) {
      const button = event.target;
      const row = button.closest('tr');
      const contentRow = row.nextElementSibling;
  
      if (contentRow && contentRow.classList.contains('expanded-row')) {
        contentRow.remove();
      } else {
        const newRow = row.parentNode.insertRow(row.rowIndex + 1);
        newRow.classList.add('expanded-row');
        const newCell = newRow.insertCell(0);
        newCell.colSpan = row.cells.length;
        const contentDiv = document.createElement('div');
        newRow.appendChild(newCell);
        newCell.appendChild(contentDiv);
  
        row.querySelectorAll('td').forEach((cell, index) => {
          if (index > 2) {
            const cellContent = cell.cloneNode(true);
            cellContent.style.display = 'block';
            contentDiv.appendChild(cellContent);
          }
        });
      }
    }
  
    function processDataAndPopulateTable(data, tableId) {
      const values = data.values;
      const tableBody = document.querySelector(`#${tableId} tbody`);
      tableBody.innerHTML = '';
  
      values.forEach(row => {
        const newRow = tableBody.insertRow();
        row.forEach((cellValue, index) => {
          const newCell = newRow.insertCell();
          const isMixed = containsArabic(cellValue) && /[a-zA-Z]/.test(cellValue);
          const isArabicOnly = isPureArabic(cellValue);
  
          const newText = document.createElement('div');
          newText.innerHTML = processText(cellValue).replace(/\n/g, '<br>');
  
          if (index === 2) {
            const button = document.createElement('button');
            button.textContent = newText.textContent;
            button.addEventListener('click', toggleRowVisibility);
            newCell.appendChild(button);
          } else {
            newCell.appendChild(newText);
            newCell.style.display = 'none';
          }
  
          if (isArabicOnly) {
            newCell.classList.add('rtl');
          } else {
            newCell.classList.add('indonesia');
          }
        });
      });
    }
  
    function getData(spreadsheetId, range, tableId) {
      const API_KEY = 'AIzaSyA8x0yI8zCPUgZktmGNvQVTzhm1fdZ0K74';
      fetch(`https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/${range}?key=${API_KEY}`)
        .then(response => response.json())
        .then(data => processDataAndPopulateTable(data, tableId))
        .catch(error => console.error('Error fetching data:', error));
    }
  
    // Ambil data dari Google Sheet
    const SPREADSHEET_ID2 = '1YbxvxOHs_3YXX8QhAZWTaKpP8O_CYqKUwfYWm-OOTLg';
    const RANGE2 = 'TABIR';
    getData(SPREADSHEET_ID2, RANGE2, 'dataTable2');
  
    // Fitur pencarian
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.search-box').forEach(searchBox => {
        searchBox.addEventListener('submit', function(event) {
          event.preventDefault();
          const input = searchBox.querySelector('input[type="text"]');
          const searchText = input.value.trim().toUpperCase();
          const tableId = searchBox.id.replace('searchBox', 'dataTable');
          const table = document.getElementById(tableId);
          const buttons = table.querySelectorAll('button');
  
          buttons.forEach(button => {
            const buttonText = button.textContent.trim().toUpperCase();
            const row = button.closest('tr');
  
            if (searchText === '' || buttonText.includes(searchText)) {
              row.style.display = '';
            } else {
              row.style.display = 'none';
            }
          });
        });
      });
  
      document.querySelectorAll('.search-box input[type="text"]').forEach(input => {
        input.addEventListener('input', function() {
          const searchText = input.value.trim().toUpperCase();
          const tableId = input.closest('.search-box').id.replace('searchBox', 'dataTable');
          const table = document.getElementById(tableId);
          const buttons = table.querySelectorAll('button');
  
          buttons.forEach(button => {
            const buttonText = button.textContent.trim().toUpperCase();
            const row = button.closest('tr');
  
            if (searchText === '' || buttonText.includes(searchText)) {
              row.style.display = '';
            } else {
              row.style.display = 'none';
            }
          });
        });
      });
    });
  </script>
</body>
</html>
